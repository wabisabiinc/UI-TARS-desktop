name: deploy

on:
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œ
  push:
    branches: [ main ]  # main ãƒ–ãƒ©ãƒ³ãƒã« push ã•ã‚ŒãŸã‚‰å®Ÿè¡Œ

permissions:
  contents: write      # â† Release ã‚‚ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹

jobs:
  trigger-render:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render deploy via webhook
        shell: bash           # â† ã“ã“ãŒä»Šå›ã®ã‚­ãƒ¢
        env:
          RENDER_DEPLOY_HOOK_URL: ${{ secrets.RENDER_DEPLOY_HOOK_URL }}
        run: |
          echo "ğŸŒ Triggering Render deploy via webhook"
          curl -X POST "$RENDER_DEPLOY_HOOK_URL" \
            -H "Content-Type: application/json" \
            -d '{"skip":false}'
