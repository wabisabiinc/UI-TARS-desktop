# Dockerfile.ui
FROM node:18-alpine
WORKDIR /app

# 1) ビルド済みアセットをコピー
COPY apps/agent-tars/dist ./dist

# 2) npm 用の package.json と package-lock.json をコピー
COPY apps/agent-tars/package.json ./
COPY apps/agent-tars/package-lock.json ./

# 3) lockfile ベースで production 依存だけクリーンインストール
RUN npm ci --omit=dev

# 4) 起動はこれまでどおり
CMD ["pnpm", "run", "start:web"]
